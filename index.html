<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buscador ITV - Parte II</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
    <link rel="stylesheet" href="https://unpkg.com/swagger-ui-dist@5/swagger-ui.css">
</head>
<body>
    <div class="tabs">
        <button class="tab-btn active" onclick="showTab('busqueda')">Búsqueda</button>
        <button class="tab-btn" onclick="showTab('carga')">Carga</button>
        <button class="tab-btn" onclick="showTab('swagger')">API Swagger</button>
    </div>

    <!-- BÚSQUEDA -->
    <div id="busqueda" class="tab-content active">
        <h2>Formulario de Búsqueda</h2>
        <form id="searchForm">
            <div class="form-row">
                <label>Localidad: <input type="text" name="localidad"></label>
                <label>Cd. Postal: <input type="text" name="cp"></label>
            </div>
            <div class="form-row">
                <label>Provincia: <input type="text" name="provincia"></label>
                <label>Tipo: 
                    <select name="tipo">
                        <option value="">Todos</option>
                        <option value="fija">Estación Fija</option>
                        <option value="movil">Estación Móvil</option>
                        <option value="otros">Otros</option>
                    </select>
                </label>
            </div>
            <button type="submit">Buscar</button>
        </form>

        <table id="resultadosBusqueda">
            <thead><tr><th>Nombre</th><th>Tipo</th><th>Dirección</th><th>Localidad</th><th>Cd. postal</th><th>Provincia</th><th>Descripción</th></tr></thead>
            <tbody></tbody>
        </table>

        <div id="mapaMashup"></div>
    </div>

    <!-- CARGA -->
    <div id="carga" class="tab-content">
        <h2>Formulario de Carga</h2>
        <form id="loadForm">
            <div class="form-row">
                <label>Fuente de datos:
                    <select name="fuente">
                        <option>CAT XML</option>
                        <option>GAL CSV</option>
                        <option>CV JSON</option>
                    </select>
                </label>
                <label>Archivo: <input type="file" name="archivo" accept=".xml,.csv,.json"></label>
            </div>
            <button type="submit">Cargar</button>
        </form>

        <div id="resultadosCarga">
            <h3>Nº registros cargados correctamente: <span id="okCount">0</span></h3>
            
            <h4>Registros con errores y reparados:</h4>
            <table id="reparados">
                <thead><tr><th>Fuente</th><th>nombre</th><th>Localidad</th><th>motivo error</th><th>operación</th></tr></thead>
                <tbody></tbody>
            </table>
            
            <h4>Registros rechazados:</h4>
            <table id="rechazados">
                <thead><tr><th>Fuente</th><th>nombre</th><th>Localidad</th><th>motivo error</th></tr></thead>
                <tbody></tbody>
            </table>
        </div>
    </div>

    <!-- SWAGGER -->
    <div id="swagger" class="tab-content">
        <h2>API REST Documentation</h2>
        <div id="swagger-container"></div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://unpkg.com/swagger-ui-dist@5/swagger-ui-bundle.js"></script>
    <script src="https://unpkg.com/swagger-ui-dist@5/swagger-ui-standalone-preset.js"></script>
    <script src="app.js"></script>
</body>
</html>
